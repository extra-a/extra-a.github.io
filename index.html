<!DOCTYPE html>
<html>
  <head>
    <title>Sauerbraten SDL2 Client</title>
    <link href="http://fonts.googleapis.com/css?family=Ubuntu+Mono|Source+Sans+Pro" rel="stylesheet" type="text/css">    
    <link href="style/style.css" rel="stylesheet" type="text/css">
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8">
  </head>

  <body>
    <div id="content">

      <h1>Sauerbraten SDL2 Client</h1>

      <div class="table">
        <div id="download" class="cell">
          <a class="download-button" href="https://github.com/extra-a/sauer-sdl2-bins/archive/master.zip">
            <div>Download</div>
            <div id="version">Version</div>
          </a>
        </div>
        <div id="description" class="cell">
          <p id="main-description">
            <a href="http://sauerbraten.org/">Sauerbraten</a> SDL2
            Client client for windows/linux/macos. It also has some
            additional features and HUD customisations, that have been
            missing for years (all of them are disabled by default and
            separate configuration files are used). All configuration
            options are now integrated into the main menu.
          </p>
        </div>
      </div>

      <h2>Features</h2>

      <div id="features">
        <ul>
          <li><b>Open source:
              <a href="https://github.com/extra-a/sauer-sdl2.git">
                code is on GitHub</a></b></li>
          <li>New HUD with highly customisable elements</li>
          <li>New HUD elements: clock, scores, ammobar and
            lagometer <sup id="ref1"><a href="#note1">[1]</a></sup></li>
          <li>Several predefined HUD customisations</li>
          <li>All HUD customisations can be done via GUI</li>
          <li>Persistent player searches across all servers aka friend lists</li>
          <li>Server scoreboard
          previews <sup id="ref2"><a href="#note2">[2]</a></sup> </li>
          <li>Options to show more statistics on scoreboard</li>
          <li>Options to remove or customise particles effects and trails</li>
          <li>Options to customise chat and team text colors</li>
          <li>Per-weapon player's accuracy and damage statistics board
            <sup id="ref3"><a href="#note3">[3]</a></sup></li>
          <li>Use following player team in spectator mode</li>
          <li>New variable <code>positionpacketdelay</code> that
            decreases client's packet
            delay <sup id="ref4"><a href="#note4">[4]</a></sup> </li>
          <li>New
            command <code>/writeextendedcfg <i>filename</i></code> to
            save only new variables in a file</li>
          <li>New
            command <code>/ignoreserver <i>host</i> <i>[port]</i></code>
            to permanently ignore server on the list</li>
          <li>New
            command <code>/demoseek <i>min</i> <i>sec</i></code> to
            make a fast rewind to any position in a demo</li>
          <li>Auto downloading demos from
          servers <sup id="ref5"><a href="#note5">[5]</a></sup>
          </li>
          <li>Demobrowser to play downloaded demos</li>
          <li>Option to play frag beep sound</li>
          <li>Integrated main menu with all new
            submenus <sup id="ref6"><a href="#note6">[6]</a></sup>
          </li>
          <li>New Alt+Enter shortcut for window minimisation
          </li>
        </ul>
      </div>

      <h2>Screenshots</h2>

      <div id="screenshots">
        <div class="figure">
          <img src="./screenshots/hudnew.jpg" alt="New HUD variant 1">
          <div class="caption">New customisable HUD</div>
        </div>
        <div class="figure">
          <img src="./screenshots/hudnew2.jpg" alt="New HUD variant 2">
          <div class="caption">New customisable HUD</div>
        </div>
        <div class="figure">
          <img src="./screenshots/hudnew3.jpg" alt="New HUD variant 3">
          <div class="caption">New customisable HUD</div>
        </div>
        <div class="figure">
          <img src="./screenshots/players_search.jpg" alt="Players search">
          <div class="caption">Players search across all servers</div>
        </div>
        <div class="figure">
          <img src="./screenshots/search_editor.jpg" alt="Search editor">
          <div class="caption">Players search editor</div>
        </div>
        <div class="figure">
          <img src="./screenshots/server_preview.jpg" alt="Server preview">
          <div class="caption">Server preview</div>
        </div>
        <div class="figure">
          <img src="./screenshots/stats.jpg" alt="Detailed player statistics">
          <div class="caption">Detailed player statistics board</div>
        </div>
        <div class="figure">
          <img src="./screenshots/scores.jpg" alt="Scoreboard">
          <div class="caption">Scoreboard with additional statistics</div>
        </div>
        <div class="figure">
          <img src="./screenshots/hud_config.jpg" alt="Hudmenu">
          <div class="caption">HUD settings menu</div>
        </div>
        <div class="figure">
          <img src="./screenshots/demobrowser.jpg" alt="Demobrowser">
          <div class="caption">Demobrowser</div>
        </div>
        <div class="figure">
          <img src="./screenshots/main_menu.jpg" alt="Mainmenu">
          <div class="caption">New main menu</div>
        </div>
      </div>

      <h2 id="bnet">Better networking</h2>

      <div class="text-container">
        <p>
          By default Sauerbraten client sends around 30 player position
          packets per second. Server retranslates these packets to
          other clients with the same rate of 30 packets per
          second. Time between two received position packets from a
          server is also know as pj. Such low rates were used back in
          90s for modem connection rates and are obsolete nowadays,
          only causing huge artificial network lags.

        <p>
          So position handing is working this way. The first step is
          when a client sends position packet with a <i>delay of
          sender packet rate</i> (33ms), then it takes a <i>sender
          network delay</i> before a packet reaches the server. Then
          <i>server packet rate delay</i> that varies from 0ms to 33ms
          occurs. And then the final <i>receiver network delay</i>
          takes place.
        </p>

        <p>
          This results in artificial delays form 33ms up to 66ms. The
          first problem is that such values are significant compared
          to networks delays which are about half of a ping value. The
          second problem is that the delay varies about twice it's
          minimum value. Client side interpolation and (Sauerbraten
          uses client side hit detection) will have significant
          position errors because a time interval between two received
          position packets can be two times wider than the original
          one. Furthermore colliding frequencies of server's and
          client's packet rates are causing delays on a receiver
          side. When sender's network delay slightly increases, the
          time interval between two packets will be more than a server
          packet rate. So that packet may miss a server time
          slice. This could often happen even on a very good
          connection. It also could be seen on a lagometer, client pj
          will jump up to 66ms, twice the server packet delay time.
        </p>

        <p>
          The sender packet rate of 125 packets per second with even
          the default server rate could improve position
          precision. Several client packets are send to a server per
          time slice, so additional delay will vary from 33ms to 41ms
          without any slice misses. And for a server with a lower
          packets delays of 10ms that value will be even much lower
          from 10ms to 18ms and position interpolation will be made
          with 100 packet per second (instead of 30).
        </p>

        <p>
          In conclusion, client 8ms position packet delay and 10-20ms
          server one will give much better results. It will increase
          server traffic around 3 times, but that should not be a
          problem today. Also these changes are fully compatible with
          the Sauerbraten default client and server.
        </p>

        <p>
          <b>Servers with support of lower position
            delay: <a href="https://github.com/vasyahuyasa/remod-sauerbraten">Remod</a> </b>
        </p>

      </div>

      <div id="notes">
        <span id="note1"> <a href="#ref1">1.</a> Lagometer graph is
          showing non-smoothed pj values, the full height is equal to
          100ms. </span> <br>
        <span id="note2"> <a href="#ref2">2.</a> To disable server
        previews use <code>showserverpreviews 0</code> option.</span> <br>
        <span id="note3"> <a href="#ref3">3.</a> Due to current
          network protocol limitations statistics are gathered only
          after connecting to a server. </span> <br>
        <span id="note4"> <a href="#ref4">4.</a> See <a href="#bnet">Better
            networking</a> section for a detailed explanation.</span> <br>
        <span id="note5"> <a href="#ref5">5.</a> Demo downloading may
          be not allowed by server settings or modifications. </span> <br>
        <span id="note6"> <a href="#ref6">6.</a> To use the default
          menu set <code>usenewmainmenu 0</code> and restart the
          game.</span>
      </div>

    </div>
    <script src="jquery.xdomainajax.js"></script>
    <script src="version.js"></script>
  </body>

</html>
